(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{8211:function(e,t,s){Promise.resolve().then(s.bind(s,3385))},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},3385:function(e,t,s){"use strict";var a=s(7437),c=s(2265),n=s(6463);s(9992),t.default=()=>{let[e,t]=(0,c.useState)([]),[s,l]=(0,c.useState)(""),[i,o]=(0,c.useState)(!1),[r,d]=(0,c.useState)(!1),[u,h]=(0,c.useState)(null),m="https://task-app-v262.onrender.com/tasks",p=(0,n.useRouter)();(0,c.useEffect)(()=>{localStorage.getItem("authToken")||(window.alert("Voc\xea precisa realizar o login para acessar sua lista de tarefas"),p.push("/"))},[p]);let x=async()=>{let e=await fetch(m);t(await e.json())};(0,c.useEffect)(()=>{x()},[]);let f=()=>{document.querySelector("header").classList.toggle("blur")};(0,c.useEffect)(()=>{f()},[i]),(0,c.useEffect)(()=>{f()},[r]);let j=async()=>{if(s.trim()){let a=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s,completed:!1})});t([...e,await a.json()]),l(""),o(!1)}},k=e=>{h(e),d(!0)},N=async()=>{await fetch("".concat(m,"/").concat(u),{method:"DELETE"}),t(e.filter(e=>e._id!==u)),d(!1),h(null)},b=async s=>{let a=e.find(e=>e._id===s),c={...a,completed:!a.completed};await fetch("".concat(m,"/").concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),t(e.map(e=>e._id===s?c:e))},g=(0,c.useRef)(null);return(0,c.useEffect)(()=>{g.current&&(g.current.style.display="block")},[]),(0,a.jsxs)("div",{className:"allContent",children:[i&&(0,a.jsxs)("div",{className:"popup ".concat(i?"active":""),children:[(0,a.jsx)("h2",{children:"Nova Tarefa"}),(0,a.jsx)("span",{children:"T\xedtulo"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Digite",id:"nTaskInput"}),(0,a.jsxs)("div",{className:"buttonsContainer",children:[(0,a.jsx)("button",{onClick:()=>o(!1),className:"cancelButton",children:"Cancelar"}),(0,a.jsx)("button",{onClick:j,children:"Adicionar"})]})]}),r&&(0,a.jsxs)("div",{className:"popup ".concat(r?"active":""),children:[(0,a.jsx)("h2",{children:"Deletar tarefa"}),(0,a.jsx)("p",{children:"Tem certeza de que deseja deletar essa tarefa?"}),(0,a.jsxs)("div",{className:"buttonsContainer",children:[(0,a.jsx)("button",{onClick:()=>d(!1),className:"cancelButton",children:"Cancelar"}),(0,a.jsx)("button",{onClick:N,className:"deleteButton",children:"Deletar"})]})]}),(0,a.jsxs)("div",{className:"todo-container ".concat(i||r?"blur":""),children:[(0,a.jsxs)("ul",{className:"taskList",children:[(0,a.jsx)("h1",{children:"Suas tarefas de Hoje"}),0===e.filter(e=>!e.completed).length?(0,a.jsx)("p",{children:"Uffa! Voc\xea n\xe3o possui tarefas pendentes :)"}):e.filter(e=>!e.completed).map(e=>(0,a.jsxs)("li",{children:[(0,a.jsx)("div",{className:"item",children:(0,a.jsxs)("label",{className:"custom-checkbox",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>b(e._id)}),(0,a.jsx)("span",{className:"checkmark"}),(0,a.jsx)("span",{style:{textDecoration:e.completed?"line-through":"none"},children:e.text})]})}),(0,a.jsx)("button",{onClick:()=>k(e._id),className:"excludeButton",children:(0,a.jsx)("img",{src:"/delete-icon.svg",alt:"Excluir tarefa",className:"trashIcon"})})]},e._id)),e.some(e=>e.completed)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{children:"Tarefas finalizadas"}),e.filter(e=>e.completed).map(e=>(0,a.jsxs)("li",{className:"checkedTasks",children:[(0,a.jsx)("div",{className:"item",children:(0,a.jsxs)("label",{className:"custom-checkbox",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>b(e._id)}),(0,a.jsx)("span",{className:"checkmark"}),(0,a.jsx)("span",{style:{textDecoration:e.completed?"line-through":"none"},children:e.text})]})}),(0,a.jsx)("button",{onClick:()=>k(e._id),className:"excludeButton",children:(0,a.jsx)("img",{src:"/delete-icon.svg",alt:"Excluir tarefa",className:"trashIcon"})})]},e._id))]})]}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"addTaskBtn",children:"Adicionar Tarefa"})]})]})}},9992:function(){}},function(e){e.O(0,[671,971,23,744],function(){return e(e.s=8211)}),_N_E=e.O()}]);